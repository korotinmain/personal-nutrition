<div class="min-h-screen bg-background">
  <!-- Top Bar -->
  <header class="border-b border-border bg-card">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <!-- App Title -->
        <h1 class="text-xl font-semibold">Personal Nutrition</h1>

        <!-- User Menu -->
        <div class="relative">
          <button
            (click)="toggleUserMenu()"
            [attr.aria-expanded]="showUserMenu()"
            aria-label="User menu"
            aria-haspopup="true"
            class="flex items-center gap-2 rounded-full hover:opacity-80 transition-opacity"
          >
            @if (sessionStore.user(); as user) {
              <div
                class="h-8 w-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium"
              >
                {{ getInitials() }}
              </div>
            }
          </button>

          @if (showUserMenu()) {
            <div
              role="menu"
              class="absolute right-0 mt-2 w-48 rounded-md border border-border bg-card shadow-lg z-50"
            >
              <div class="p-2">
                @if (sessionStore.user(); as user) {
                  <div
                    class="px-2 py-1.5 text-sm text-muted-foreground border-b border-border mb-1"
                  >
                    {{ user.email }}
                  </div>
                }
                <button
                  (click)="signOut()"
                  role="menuitem"
                  class="w-full text-left px-2 py-1.5 text-sm rounded hover:bg-accent transition-colors"
                >
                  Sign out
                </button>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="border-b border-border bg-card">
    <div class="container mx-auto px-4">
      <div class="flex gap-6">
        <button (click)="navigateTo('/')" [class]="getLinkClasses(currentRoute() === '/')">
          Today
        </button>
        <button [class]="getLinkClasses(false)" disabled class="cursor-not-allowed opacity-50">
          Plan
        </button>
        <button [class]="getLinkClasses(false)" disabled class="cursor-not-allowed opacity-50">
          Shopping
        </button>
        <button [class]="getLinkClasses(false)" disabled class="cursor-not-allowed opacity-50">
          Settings
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <router-outlet></router-outlet>
  </main>
</div>
